"use strict";(self.webpackChunkdocument_management=self.webpackChunkdocument_management||[]).push([[232],{7232:(tt,N,a)=>{a.r(N),a.d(N,{UserModule:()=>Ke});var p=a(9808),d=a(2554),h=a(319),c=a(3075),Z=a(2676),e=a(5e3),g=a(1584),v=a(2457),w=a(690),T=a(6107),b=a(7322),x=a(4107),R=a(508),C=a(9785),A=a(2925);function F(t,n){1&t&&(e.TgZ(0,"h2"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ADD_USER")))}function O(t,n){1&t&&(e.TgZ(0,"h2"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"EDIT_USER")))}function Y(t,n){1&t&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"FIRST_NAME_IS_REQUIRED")," "))}function M(t,n){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,Y,3,3,"div",21),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("firstName").errors?null:s.userForm.get("firstName").errors.required)}}function J(t,n){1&t&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"LAST_NAME_IS_REQUIRED")," "))}function Q(t,n){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,J,3,3,"div",21),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("lastName").errors?null:s.userForm.get("lastName").errors.required)}}function D(t,n){1&t&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MOBILE_IS_REQUIRED")," "))}function k(t,n){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,D,3,3,"div",21),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("phoneNumber").errors?null:s.userForm.get("phoneNumber").errors.required)}}function y(t,n){1&t&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"EMAIL_IS_REQUIRED")," "))}function $(t,n){1&t&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PLEASE_ENTER_VALID_EMAIL")," "))}function j(t,n){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,y,3,3,"div",21),e.YNc(2,$,3,3,"div",21),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("email").errors?null:s.userForm.get("email").errors.required),e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("email").errors?null:s.userForm.get("email").errors.email)}}function H(t,n){1&t&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PASSWORD_IS_REQUIRED")," "))}function B(t,n){1&t&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"YOU_HAVE_TO_ENTER_AT_LEAST_DIGIT")," "))}function V(t,n){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,H,3,3,"div",21),e.YNc(2,B,3,3,"div",21),e.qZA()),2&t){const s=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("password").errors?null:s.userForm.get("password").errors.required),e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("password").errors?null:s.userForm.get("password").errors.minlength)}}function W(t,n){if(1&t&&(e.TgZ(0,"div",6),e.TgZ(1,"div",7),e.TgZ(2,"label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"input",23),e.YNc(6,V,3,2,"div",3),e.qZA(),e.qZA()),2&t){const s=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,2,"PASSWORD")),e.xp6(3),e.Q6J("ngIf",s.userForm.get("password").touched&&s.userForm.get("password").errors)}}function X(t,n){1&t&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CONFIRM_PASSWORD_IS_REQUIRED")," "))}function z(t,n){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,X,3,3,"div",21),e.qZA()),2&t){const s=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("confirmPassword").errors?null:s.userForm.get("confirmPassword").errors.required)}}function G(t,n){1&t&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PASSWORDS_DO_NOT_MATCH")," "))}function K(t,n){if(1&t&&(e.TgZ(0,"div",6),e.TgZ(1,"div",7),e.TgZ(2,"label"),e._uU(3,"Confirm Password"),e.qZA(),e._UZ(4,"input",24),e.YNc(5,z,2,1,"div",3),e.YNc(6,G,3,3,"div",21),e.qZA(),e.qZA()),2&t){const s=e.oxw();e.xp6(5),e.Q6J("ngIf",s.userForm.get("confirmPassword").touched&&s.userForm.get("confirmPassword").errors),e.xp6(1),e.Q6J("ngIf",s.userForm.get("confirmPassword").touched&&s.userForm.hasError("notSame"))}}function ee(t,n){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.hij(" ",s.selectedRoles[0].name," ")}}function te(t,n){if(1&t&&(e.TgZ(0,"span",25),e._uU(1),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.AsE(" (+",s.selectedRoles.length-1," ",2===s.selectedRoles.length?"other":"others",") ")}}function se(t,n){if(1&t&&(e.TgZ(0,"mat-option",26),e._uU(1),e.qZA()),2&t){const s=n.$implicit;e.Q6J("value",s),e.xp6(1),e.Oqu(s.name)}}function ie(t,n){if(1&t){const s=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){return e.CHM(s),e.oxw(2).saveUser()}),e._UZ(1,"i",29),e._uU(2," Save"),e.qZA()}}function ne(t,n){1&t&&(e.ynx(0),e.YNc(1,ie,3,0,"button",27),e.BQk()),2&t&&(e.xp6(1),e.Q6J("hasClaim","user_edit_user"))}function re(t,n){if(1&t){const s=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){return e.CHM(s),e.oxw(2).saveUser()}),e._UZ(1,"i",29),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"SAVE"),""))}function oe(t,n){1&t&&(e.ynx(0),e.YNc(1,re,4,3,"button",27),e.BQk()),2&t&&(e.xp6(1),e.Q6J("hasClaim","user_create_user"))}const ae=function(){return["/users"]};let q=(()=>{class t extends Z.H{constructor(s,i,r,o,l,m,f){super(),this.fb=s,this.router=i,this.activeRoute=r,this.userService=o,this.toastrService=l,this.commonService=m,this.translationService=f,this.isEditMode=!1,this.selectedRoles=[]}ngOnInit(){this.createUserForm(),this.sub$.sink=this.activeRoute.data.subscribe(s=>{s.user?(this.isEditMode=!0,this.userForm.patchValue(s.user),this.user=s.user):(this.userForm.get("password").setValidators([c.kI.required,c.kI.minLength(6)]),this.userForm.get("confirmPassword").setValidators([c.kI.required]))}),this.getRoles()}createUserForm(){this.userForm=this.fb.group({id:[""],firstName:["",[c.kI.required]],lastName:["",[c.kI.required]],email:["",[c.kI.required,c.kI.email]],phoneNumber:["",[c.kI.required]],password:[""],confirmPassword:[""]},{validator:this.checkPasswords})}checkPasswords(s){return s.get("password").value===s.get("confirmPassword").value?null:{notSame:!0}}saveUser(){if(this.userForm.valid){const s=this.createBuildObject();this.sub$.sink=this.isEditMode?this.userService.updateUser(s).subscribe(()=>{this.toastrService.success(this.translationService.getValue("USER_UPDATED_SUCCESSFULLY")),this.router.navigate(["/users"])}):this.userService.addUser(s).subscribe(()=>{this.toastrService.success(this.translationService.getValue("USER_CREATED_SUCCESSFULLY")),this.router.navigate(["/users"])})}else this.toastrService.error(this.translationService.getValue("PLEASE_ENTER_PROPER_DATA"))}createBuildObject(){return{id:this.userForm.get("id").value,firstName:this.userForm.get("firstName").value,lastName:this.userForm.get("lastName").value,email:this.userForm.get("email").value,phoneNumber:this.userForm.get("phoneNumber").value,password:this.userForm.get("password").value,userName:this.userForm.get("email").value,userRoles:this.getSelectedRoles()}}getSelectedRoles(){return this.selectedRoles.map(s=>({userId:this.userForm.get("id").value,roleId:s.id}))}getRoles(){this.sub$.sink=this.commonService.getRoles().subscribe(s=>{if(this.roleList=s,this.isEditMode){const i=this.user.userRoles.map(r=>r.roleId);this.selectedRoles=this.roleList.filter(r=>i.indexOf(r.id)>-1)}})}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(c.qu),e.Y36(d.F0),e.Y36(d.gz),e.Y36(g.K),e.Y36(v._W),e.Y36(w.v),e.Y36(T.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-manage-user"]],features:[e.qOj],decls:53,vars:33,consts:[[1,"row","mb-3","align-items-center","justify-content-between"],[1,"col-md-auto","col-sm-auto"],[1,"section-title"],[4,"ngIf"],[3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["formControlName","firstName","type","text",1,"form-control"],["formControlName","lastName","type","text",1,"form-control"],["formControlName","phoneNumber","type","text",1,"form-control"],["formControlName","email","type","email",1,"form-control"],["class","col-md-6",4,"ngIf"],[1,"form-group","col-md-6"],["appearance","fill"],["multiple","",3,"value","valueChange"],["class","example-additional-selection",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[1,"m-top-10","col-md-12"],["type","button",1,"btn","btn-danger","btn-sm",3,"routerLink"],[1,"las","la-times-circle"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["autocomplete","new-password","formControlName","password","type","password",1,"form-control"],["autocomplete","new-password","formControlName","confirmPassword","type","password",1,"form-control"],[1,"example-additional-selection"],[3,"value"],["class","btn btn-success btn-sm m-right-10","cdkFocusInitial","",3,"click",4,"hasClaim"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","m-right-10",3,"click"],[1,"las","la-save"]],template:function(s,i){1&s&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,F,3,3,"h2",3),e.YNc(4,O,3,3,"h2",3),e.qZA(),e.qZA(),e.qZA(),e.TgZ(5,"form",4),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"label"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e._UZ(12,"input",8),e.YNc(13,M,2,1,"div",3),e.qZA(),e.qZA(),e.TgZ(14,"div",6),e.TgZ(15,"div",7),e.TgZ(16,"label"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"input",9),e.YNc(20,Q,2,1,"div",3),e.qZA(),e.qZA(),e.TgZ(21,"div",6),e.TgZ(22,"div",7),e.TgZ(23,"label"),e._uU(24),e.ALo(25,"translate"),e.qZA(),e._UZ(26,"input",10),e.YNc(27,k,2,1,"div",3),e.qZA(),e.qZA(),e.TgZ(28,"div",6),e.TgZ(29,"div",7),e.TgZ(30,"label"),e._uU(31,"Email"),e.qZA(),e._UZ(32,"input",11),e.YNc(33,j,3,2,"div",3),e.qZA(),e.qZA(),e.YNc(34,W,7,4,"div",12),e.YNc(35,K,7,2,"div",12),e.TgZ(36,"div",13),e.TgZ(37,"mat-form-field",14),e.TgZ(38,"mat-label"),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"mat-select",15),e.NdJ("valueChange",function(o){return i.selectedRoles=o}),e.TgZ(42,"mat-select-trigger"),e.YNc(43,ee,2,1,"span",3),e.YNc(44,te,2,2,"span",16),e.qZA(),e.YNc(45,se,2,2,"mat-option",17),e.qZA(),e.qZA(),e.qZA(),e.TgZ(46,"div",18),e.YNc(47,ne,2,1,"ng-container",3),e.YNc(48,oe,2,1,"ng-container",3),e.TgZ(49,"button",19),e._UZ(50,"i",20),e._uU(51),e.ALo(52,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&s&&(e.xp6(3),e.Q6J("ngIf",!i.isEditMode),e.xp6(1),e.Q6J("ngIf",i.isEditMode),e.xp6(1),e.Q6J("formGroup",i.userForm),e.xp6(5),e.Oqu(e.lcZ(11,22,"FIRST_NAME")),e.xp6(3),e.Q6J("ngIf",i.userForm.get("firstName").touched&&i.userForm.get("firstName").errors),e.xp6(4),e.Oqu(e.lcZ(18,24,"LAST_NAME")),e.xp6(3),e.Q6J("ngIf",i.userForm.get("lastName").touched&&i.userForm.get("lastName").errors),e.xp6(4),e.Oqu(e.lcZ(25,26,"MOBILE_NUMBER")),e.xp6(3),e.Q6J("ngIf",i.userForm.get("phoneNumber").touched&&i.userForm.get("phoneNumber").errors),e.xp6(5),e.uIk("disabled",i.isEditMode?"":null),e.xp6(1),e.Q6J("ngIf",i.userForm.get("email").touched&&i.userForm.get("email").errors),e.xp6(1),e.Q6J("ngIf",!i.isEditMode),e.xp6(1),e.Q6J("ngIf",!i.isEditMode),e.xp6(4),e.Oqu(e.lcZ(40,28,"ROLES")),e.xp6(2),e.Q6J("value",i.selectedRoles),e.xp6(2),e.Q6J("ngIf",i.selectedRoles.length>0),e.xp6(1),e.Q6J("ngIf",i.selectedRoles.length>1),e.xp6(1),e.Q6J("ngForOf",i.roleList),e.xp6(2),e.Q6J("ngIf",i.isEditMode),e.xp6(1),e.Q6J("ngIf",!i.isEditMode),e.xp6(1),e.Q6J("routerLink",e.DdM(32,ae)),e.xp6(2),e.hij(" ",e.lcZ(52,30,"CANCEL"),""))},directives:[p.O5,c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,b.KE,b.hX,x.gD,x.$L,p.sg,d.rH,R.ey,C.d],pipes:[A.X$],styles:[".example-additional-selection[_ngcontent-%COMP%]{opacity:.75;font-size:.75em}"]}),t})(),S=(()=>{class t{constructor(s){this.userService=s}resolve(s,i){const r=s.paramMap.get("id");return this.userService.getUser(r)}}return t.\u0275fac=function(s){return new(s||t)(e.LFG(g.K))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();var _=a(8966);function ce(t,n){1&t&&(e.TgZ(0,"div",15),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PASSWORD_IS_REQUIRED")," "))}function le(t,n){1&t&&(e.TgZ(0,"div",15),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"YOU_HAVE_TO_ENTER_AT_LEAST_DIGIT")," "))}function me(t,n){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,ce,3,3,"div",9),e.YNc(2,le,3,3,"div",9),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.resetPasswordForm.get("password").errors?null:s.resetPasswordForm.get("password").errors.required),e.xp6(1),e.Q6J("ngIf",null==s.resetPasswordForm.get("password").errors?null:s.resetPasswordForm.get("password").errors.minlength)}}function ue(t,n){1&t&&(e.TgZ(0,"div",15),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CONFIRM_PASSWORD_IS_REQUIRED")," "))}function de(t,n){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,ue,3,3,"div",9),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.resetPasswordForm.get("confirmPassword").errors?null:s.resetPasswordForm.get("confirmPassword").errors.required)}}function pe(t,n){1&t&&(e.TgZ(0,"div",15),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PASSWORDS_DO_NOT_MATCH")," "))}let _e=(()=>{class t extends Z.H{constructor(s,i,r,o,l,m){super(),this.userService=s,this.fb=i,this.dialogRef=r,this.data=o,this.toastrService=l,this.translationService=m}ngOnInit(){this.createResetPasswordForm(),this.resetPasswordForm.get("email").setValue(this.data.userName)}createResetPasswordForm(){this.resetPasswordForm=this.fb.group({email:[],password:["",[c.kI.required,c.kI.minLength(6)]],confirmPassword:["",[c.kI.required]]},{validator:this.checkPasswords})}checkPasswords(s){return s.get("password").value===s.get("confirmPassword").value?null:{notSame:!0}}resetPassword(){this.resetPasswordForm.valid&&(this.sub$.sink=this.userService.resetPassword(this.createBuildObject()).subscribe(s=>{this.toastrService.success(this.translationService.getValue("SUCCESSFULLY_RESET_PASSWORD")),this.dialogRef.close()}))}createBuildObject(){return{email:"",password:this.resetPasswordForm.get("password").value,userName:this.resetPasswordForm.get("email").value}}onNoClick(){this.dialogRef.close()}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(g.K),e.Y36(c.qu),e.Y36(_.so),e.Y36(_.WI),e.Y36(v._W),e.Y36(T.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-reset-password"]],features:[e.qOj],decls:35,vars:23,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],[1,"col-md-12"],[1,"form-group"],["formControlName","email","type","email",1,"form-control"],["autocomplete","new-password","formControlName","password","type","password",1,"form-control"],[4,"ngIf"],["autocomplete","new-password","formControlName","confirmPassword","type","password",1,"form-control"],["class","text-danger",4,"ngIf"],["mat-dialog-actions",""],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","m-right-10",3,"click"],[1,"las","la-save"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"las","la-times-circle"],[1,"text-danger"]],template:function(s,i){1&s&&(e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div",1),e.TgZ(4,"form",2),e.TgZ(5,"div",3),e.TgZ(6,"div",4),e.TgZ(7,"label"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e._UZ(10,"input",5),e.qZA(),e.qZA(),e.TgZ(11,"div",3),e.TgZ(12,"div",4),e.TgZ(13,"label"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e._UZ(16,"input",6),e.YNc(17,me,3,2,"div",7),e.qZA(),e.qZA(),e.TgZ(18,"div",3),e.TgZ(19,"div",4),e.TgZ(20,"label"),e._uU(21),e.ALo(22,"translate"),e.qZA(),e._UZ(23,"input",8),e.YNc(24,de,2,1,"div",7),e.YNc(25,pe,3,3,"div",9),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"div",10),e.TgZ(27,"button",11),e.NdJ("click",function(){return i.resetPassword()}),e._UZ(28,"i",12),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"button",13),e.NdJ("click",function(){return i.onNoClick()}),e._UZ(32,"i",14),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.qZA()),2&s&&(e.xp6(1),e.Oqu(e.lcZ(2,11,"RESET_PASSWORD")),e.xp6(3),e.Q6J("formGroup",i.resetPasswordForm),e.xp6(4),e.Oqu(e.lcZ(9,13,"EMAIL")),e.xp6(2),e.uIk("disabled",!0),e.xp6(4),e.Oqu(e.lcZ(15,15,"PASSWORD")),e.xp6(3),e.Q6J("ngIf",i.resetPasswordForm.get("password").touched&&i.resetPasswordForm.get("password").errors),e.xp6(4),e.Oqu(e.lcZ(22,17,"CONFIRM_PASSWORD")),e.xp6(3),e.Q6J("ngIf",i.resetPasswordForm.get("confirmPassword").touched&&i.resetPasswordForm.get("confirmPassword").errors),e.xp6(1),e.Q6J("ngIf",i.resetPasswordForm.get("confirmPassword").touched&&i.resetPasswordForm.hasError("notSame")),e.xp6(4),e.hij(" ",e.lcZ(30,19,"SAVE"),""),e.xp6(4),e.hij(" ",e.lcZ(34,21,"CANCEL"),""))},directives:[_.uh,_.xY,c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,p.O5,_.H8],pipes:[A.X$],styles:[""]}),t})();var ge=a(5485),u=a(2075),L=a(773),U=a(2181),I=a(5245);const fe=function(){return["/users/manage"]};function he(t,n){1&t&&(e.TgZ(0,"button",18),e._UZ(1,"i",19),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&t&&(e.Q6J("routerLink",e.DdM(4,fe)),e.xp6(2),e.hij(" ",e.lcZ(3,2,"ADD_USER")," "))}function Ze(t,n){1&t&&e._UZ(0,"mat-spinner")}function ve(t,n){if(1&t&&(e.TgZ(0,"div",20),e.YNc(1,Ze,1,0,"mat-spinner",21),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",s.isLoadingResults)}}function Te(t,n){1&t&&(e.TgZ(0,"th",22),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"ACTION")," "))}function Ae(t,n){if(1&t){const s=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(s);const r=e.oxw().$implicit;return e.oxw().editUser(r.id)}),e.TgZ(1,"mat-icon"),e._uU(2,"edit"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"EDIT")," "))}function Ue(t,n){if(1&t){const s=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(s);const r=e.oxw().$implicit;return e.oxw().deleteUser(r)}),e.TgZ(1,"mat-icon"),e._uU(2,"delete"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"DELETE")," "))}function xe(t,n){if(1&t){const s=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(s);const r=e.oxw().$implicit;return e.oxw().userPermission(r.id)}),e.TgZ(1,"mat-icon"),e._uU(2,"people"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"PERMISSION")," "))}function Ce(t,n){if(1&t){const s=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(s);const r=e.oxw().$implicit;return e.oxw().resetPassword(r)}),e.TgZ(1,"mat-icon"),e._uU(2,"key"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"RESET_PASSWORD")," "))}function Se(t,n){if(1&t&&(e.TgZ(0,"td",23),e.TgZ(1,"button",24),e._UZ(2,"i",25),e.qZA(),e.TgZ(3,"mat-menu",null,26),e.YNc(5,Ae,5,3,"button",27),e.YNc(6,Ue,5,3,"button",28),e.YNc(7,xe,5,3,"button",28),e.YNc(8,Ce,5,3,"button",28),e.qZA(),e.qZA()),2&t){const s=e.MAs(4);e.xp6(1),e.Q6J("matMenuTriggerFor",s),e.xp6(4),e.Q6J("hasClaim","user_edit_user"),e.xp6(1),e.Q6J("hasClaim","user_delete_user"),e.xp6(1),e.Q6J("hasClaim","user_assign_permission"),e.xp6(1),e.Q6J("hasClaim","user_reset_password")}}function Ne(t,n){1&t&&(e.TgZ(0,"th",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"EMAIL")," "))}function we(t,n){if(1&t&&(e.TgZ(0,"td",23),e._uU(1),e.qZA()),2&t){const s=n.$implicit;e.xp6(1),e.hij(" ",s.email," ")}}function be(t,n){1&t&&(e.TgZ(0,"th",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"FIRST_NAME")," "))}function qe(t,n){if(1&t&&(e.TgZ(0,"td",23),e._uU(1),e.qZA()),2&t){const s=n.$implicit;e.xp6(1),e.hij(" ",s.firstName," ")}}function Le(t,n){1&t&&(e.TgZ(0,"th",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"LAST_NAME")," "))}function Ie(t,n){if(1&t&&(e.TgZ(0,"td",23),e._uU(1),e.qZA()),2&t){const s=n.$implicit;e.xp6(1),e.hij(" ",s.lastName," ")}}function Ee(t,n){1&t&&(e.TgZ(0,"th",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MOBILE_NUMBER")," "))}function Pe(t,n){if(1&t&&(e.TgZ(0,"td",23),e._uU(1),e.qZA()),2&t){const s=n.$implicit;e.xp6(1),e.hij(" ",s.phoneNumber," ")}}function Re(t,n){1&t&&e._UZ(0,"tr",30)}function Fe(t,n){1&t&&e._UZ(0,"tr",31)}let Oe=(()=>{class t extends Z.H{constructor(s,i,r,o,l,m,f){super(),this.userService=s,this.toastrService=i,this.commonService=r,this.commonDialogService=o,this.dialog=l,this.router=m,this.translationService=f,this.users=[],this.displayedColumns=["action","email","firstName","lastName","phoneNumber"],this.isLoadingResults=!0}ngOnInit(){this.getUsers()}deleteUser(s){this.sub$.sink=this.commonDialogService.deleteConformationDialog(`${this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_DELETE")} ${s.userName}`).subscribe(i=>{i&&(this.sub$.sink=this.userService.deleteUser(s.id).subscribe(()=>{this.toastrService.success(this.translationService.getValue("USER_DELETED_SUCCESSFULLY")),this.getUsers()}))})}getUsers(){this.isLoadingResults=!0,this.sub$.sink=this.commonService.getUsers().subscribe(s=>{this.isLoadingResults=!1,this.users=s},s=>{s.messages.forEach(i=>{this.toastrService.error(i),this.isLoadingResults=!1})})}resetPassword(s){this.dialog.open(_e,{width:"350px",data:Object.assign({},s)})}editUser(s){this.router.navigate(["/users/manage",s])}userPermission(s){this.router.navigate(["/users/permission",s])}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(g.K),e.Y36(v._W),e.Y36(w.v),e.Y36(ge.V),e.Y36(_.uw),e.Y36(d.F0),e.Y36(T.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-list"]],features:[e.qOj],decls:30,vars:9,consts:[[1,"row","mb-3","align-items-center","justify-content-between"],[1,"col-md-auto","col-sm-auto"],[1,"section-title"],[1,"widget-title"],["class","btn btn-success btn-sm m-right-10",3,"routerLink",4,"hasClaim"],[1,"mat-elevation-z8"],["class","loading-shade",4,"ngIf"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","email"],["matColumnDef","firstName"],["matColumnDef","lastName"],["matColumnDef","phoneNumber"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"btn","btn-success","btn-sm","m-right-10",3,"routerLink"],[1,"las","la-plus"],[1,"loading-shade"],[4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["aria-label","Action",1,"btn","btn-sm","btn-primary",3,"matMenuTriggerFor"],[1,"las","la-ellipsis-v"],["menu","matMenu"],["mat-menu-item","","class","btn btn-light btn-sm",3,"click",4,"hasClaim"],["class","btn btn-light btn-sm","mat-menu-item","",3,"click",4,"hasClaim"],["mat-menu-item","",1,"btn","btn-light","btn-sm",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(s,i){1&s&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",1),e.TgZ(7,"h4",3),e.YNc(8,he,4,5,"button",4),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",5),e.YNc(10,ve,2,1,"div",6),e.TgZ(11,"div",7),e.TgZ(12,"table",8),e.ynx(13,9),e.YNc(14,Te,4,3,"th",10),e.YNc(15,Se,9,5,"td",11),e.BQk(),e.ynx(16,12),e.YNc(17,Ne,3,3,"th",10),e.YNc(18,we,2,1,"td",11),e.BQk(),e.ynx(19,13),e.YNc(20,be,3,3,"th",10),e.YNc(21,qe,2,1,"td",11),e.BQk(),e.ynx(22,14),e.YNc(23,Le,3,3,"th",10),e.YNc(24,Ie,2,1,"td",11),e.BQk(),e.ynx(25,15),e.YNc(26,Ee,3,3,"th",10),e.YNc(27,Pe,2,1,"td",11),e.BQk(),e.YNc(28,Re,1,0,"tr",16),e.YNc(29,Fe,1,0,"tr",17),e.qZA(),e.qZA(),e.qZA()),2&s&&(e.xp6(4),e.Oqu(e.lcZ(5,7,"USERS")),e.xp6(4),e.Q6J("hasClaim","user_create_user"),e.xp6(2),e.Q6J("ngIf",i.isLoadingResults),e.xp6(2),e.Q6J("dataSource",i.users),e.xp6(16),e.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",i.displayedColumns))},directives:[C.d,p.O5,u.BZ,u.w1,u.fO,u.Dz,u.as,u.nj,d.rH,L.$g,u.ge,u.ev,U.p6,U.VK,U.OP,I.Hw,u.XQ,u.Gk],pipes:[A.X$],styles:[""]}),t})();var E=a(2868),Ye=a(38),Me=a(4479),Je=a(2328),P=a(7446);function Qe(t,n){if(1&t){const s=e.EpF();e.TgZ(0,"div",20),e.TgZ(1,"mat-checkbox",21),e.NdJ("change",function(r){e.CHM(s);const o=e.oxw().$implicit,l=e.oxw().$implicit;return e.oxw().onPermissionChange(r,l,o)}),e._uU(2),e.qZA(),e.qZA()}if(2&t){const s=e.oxw().$implicit,i=e.oxw().$implicit,r=e.oxw();e.xp6(1),e.Q6J("checked",r.checkPermission(i.id,s.id)),e.xp6(1),e.hij(" ",s.name," ")}}function De(t,n){if(1&t&&(e.ynx(0),e.YNc(1,Qe,3,2,"div",19),e.BQk()),2&t){const s=n.$implicit,i=e.oxw().$implicit,r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.checkPageAction(i.id,s.id))}}function ke(t,n){if(1&t){const s=e.EpF();e.TgZ(0,"div",14),e.TgZ(1,"div",15),e.TgZ(2,"mat-checkbox",16),e.NdJ("change",function(r){const l=e.CHM(s).$implicit;return e.oxw().onPageSelect(r,l.name)}),e.TgZ(3,"b"),e._uU(4),e.qZA(),e.qZA(),e.qZA(),e.TgZ(5,"div",17),e.YNc(6,De,2,1,"ng-container",18),e.qZA(),e.qZA()}if(2&t){const s=n.$implicit,i=e.oxw();e.xp6(4),e.hij(" ",s.name,""),e.xp6(2),e.Q6J("ngForOf",i.operations)}}function ye(t,n){if(1&t){const s=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){return e.CHM(s),e.oxw().saveUserClaim()}),e._UZ(1,"i",23),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"SAVE"),""))}const $e=function(){return["/users"]};let je=(()=>{class t{constructor(){this.manageUserClaimOperation=new e.vpe,this.step=0}ngOnInit(){}checkPageAction(s,i){return!!this.screenOperations.find(o=>o.screenId===s&&o.operationId===i)}onPageSelect(s,i){if(s.checked)this.screens.filter(o=>o.name==i).forEach(o=>{this.operations.forEach(l=>{this.checkPageAction(o.id,l.id)&&this.user.userClaims.push({userId:this.user.id,claimType:`${o.name}_${l.name}`,claimValue:"",screenId:o.id,operationId:l.id})})});else{var r=this.screens.find(o=>o.name==i);this.user.userClaims=this.user.userClaims.filter(o=>o.screenId!=r.id)}}checkPermission(s,i){return!!this.user.userClaims.find(o=>o.screenId===s&&o.operationId===i)}onPermissionChange(s,i,r){if(s.checked)this.user.userClaims.push({userId:this.user.id,claimType:`${i.name}_${r.name}`,claimValue:"",screenId:i.id,operationId:r.id});else{const o=this.user.userClaims.find(m=>m.operationId===r.id&&m.screenId===i.id),l=this.user.userClaims.indexOf(o,0);l>-1&&this.user.userClaims.splice(l,1)}}saveUserClaim(){this.manageUserClaimOperation.emit(this.user)}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-permission-presentation"]],inputs:{screens:"screens",operations:"operations",screenOperations:"screenOperations",loading:"loading",loadingScreen:"loadingScreen",loadingOperation:"loadingOperation",user:"user"},outputs:{manageUserClaimOperation:"manageUserClaimOperation"},decls:23,vars:15,consts:[[1,"row","mb-3","align-items-center","justify-content-between"],[1,"col-md-auto","col-sm-auto"],[1,"section-title"],[1,"text-info"],[1,"row","align-items-center"],[1,"col-md-4","col-sm-12"],[1,"widget-title"],[1,"row"],[1,"col-sm-12"],["fxLayout","row wrap",4,"ngFor","ngForOf"],[1,"m-top-10"],["class","btn btn-success btn-sm m-right-10","cdkFocusInitial","",3,"click",4,"hasClaim"],[1,"btn","btn-danger","btn-sm",3,"routerLink"],[1,"las","la-times-circle"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.sm","100"],["color","primary",3,"change"],[1,"row","ml-2"],[4,"ngFor","ngForOf"],["class","col-sm-3",4,"ngIf"],[1,"col-sm-3"],["color","primary",3,"checked","change"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","m-right-10",3,"click"],[1,"las","la-save"]],template:function(s,i){1&s&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2"),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"span",3),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div"),e.TgZ(9,"div",4),e.TgZ(10,"div",5),e.TgZ(11,"h1",6),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",7),e.TgZ(15,"div",8),e.YNc(16,ke,7,2,"div",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",10),e.YNc(18,ye,4,3,"button",11),e.TgZ(19,"a",12),e._UZ(20,"i",13),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.qZA()),2&s&&(e.xp6(4),e.hij("",e.lcZ(5,8,"USER_PAGE_PERMISSION_TO")," : "),e.xp6(3),e.AsE("",null==i.user?null:i.user.firstName," ",null==i.user?null:i.user.lastName,""),e.xp6(5),e.Oqu(e.lcZ(13,10,"PERMISSION")),e.xp6(4),e.Q6J("ngForOf",i.screens),e.xp6(2),e.Q6J("hasClaim","user_assign_permission"),e.xp6(1),e.Q6J("routerLink",e.DdM(14,$e)),e.xp6(2),e.hij(" ",e.lcZ(22,12,"CANCEL"),""))},directives:[p.sg,C.d,d.yS,P.oG,p.O5],pipes:[A.X$],styles:[""]}),t})();const Be=[{path:"",component:Oe,data:{claimType:"user_view_users"},canActivate:[h.a]},{path:"manage/:id",component:q,resolve:{user:S},data:{claimType:"user_edit_user"},canActivate:[h.a]},{path:"manage",component:q,data:{claimType:"user_create_user"},canActivate:[h.a]},{path:"permission/:id",component:(()=>{class t extends Z.H{constructor(s,i,r,o,l,m,f,et){super(),this.activeRoute=s,this.router=i,this.toastrService=r,this.screenService=o,this.operationService=l,this.screenOperationService=m,this.userService=f,this.translationService=et}ngOnInit(){this.sub$.sink=this.activeRoute.data.subscribe(s=>{this.user=s.user}),this.loadingOperation$=this.operationService.loaded$.pipe((0,E.b)(s=>{s||this.getOperations()})),this.operations$=this.operationService.entities$,this.loadingScreen$=this.screenService.loaded$.pipe((0,E.b)(s=>{s||this.getScreens()})),this.screens$=this.screenService.entities$,this.loading$=this.screenOperationService.loaded$,this.screenOperations$=this.screenOperationService.entities$,this.getScreenOperations()}getOperations(){this.operationService.getAll()}getScreens(){this.screenService.getAll()}getScreenOperations(){this.screenOperationService.getAll()}manageUserClaimOperation(s){this.sub$.sink=this.userService.updateUserClaim(s.userClaims,s.id).subscribe(()=>{this.toastrService.success(this.translationService.getValue("USER_PERMISSION_UPDATED_SUCCESSFULLY")),this.router.navigate(["/users"])})}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(d.gz),e.Y36(d.F0),e.Y36(v._W),e.Y36(Ye.H),e.Y36(Me.f),e.Y36(Je.h),e.Y36(g.K),e.Y36(T.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-permission"]],features:[e.qOj],decls:7,vars:19,consts:[[3,"screens","operations","screenOperations","loading","loadingScreen","loadingOperation","user","manageUserClaimOperation"]],template:function(s,i){1&s&&(e.TgZ(0,"app-user-permission-presentation",0),e.NdJ("manageUserClaimOperation",function(o){return i.manageUserClaimOperation(o)}),e.ALo(1,"async"),e.ALo(2,"async"),e.ALo(3,"async"),e.ALo(4,"async"),e.ALo(5,"async"),e.ALo(6,"async"),e.qZA()),2&s&&e.Q6J("screens",e.lcZ(1,7,i.screens$))("operations",e.lcZ(2,9,i.operations$))("screenOperations",e.lcZ(3,11,i.screenOperations$))("loading",e.lcZ(4,13,i.loading$))("loadingScreen",e.lcZ(5,15,i.loadingScreen$))("loadingOperation",e.lcZ(6,17,i.loadingOperation$))("user",i.user)},directives:[je],pipes:[p.Ov],styles:[""]}),t})(),resolve:{user:S},data:{claimType:"user_assign_permission"},canActivate:[h.a]}];let Ve=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[d.Bz.forChild(Be)],d.Bz]}),t})();var We=a(2368),Xe=a(6845),ze=a(7423),Ge=a(1125);let Ke=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[S],imports:[[p.ez,Ve,c.u5,c.UX,u.p0,L.Cq,_.Is,x.LD,We.rP,Xe.m,U.Tx,ze.ot,Ge.To,P.p9,I.Ps]]}),t})()}}]);